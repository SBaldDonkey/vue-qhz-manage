webpackJsonp([2],{"5YaT":function(n,e,t){"use strict";function a(n){t("C1z1")}Object.defineProperty(e,"__esModule",{value:!0});var l=t("aA9S"),s=t.n(l),i={data:function(){return{dialogVisible:!1,editLoading:!1,dialogFormVisible:!1,listLoading:!0,dialogTitle:"",tab:!1,form:{id:"",username:"",name:"",sdName:"",srName:"",sjName:"",phone:"",tel:"",qq:"",email:""},department:[],role:[],job:[],tableData:[]}},mounted:function(){this.rqList()},methods:{rqList:function(){var n=this;this.$fetch("/permissions/employees",{page:1,rows:30}).then(function(e){n.listLoading=!1,n.tableData=e.rows})},handleEdit:function(n,e,t){var a=this;this.$fetch("/permissions/department",{page:1,rows:30}).then(function(n){n&&(a.department=n.rows)}),this.$fetch("/permissions/role",{page:1,rows:30}).then(function(n){n&&(a.role=n.rows)}),this.$fetch("/permissions/position",{page:1,rows:30}).then(function(n){n&&(a.job=n.rows)}),void 0===n&&void 0===e&&void 0===t?(this.dialogVisible=!0,this.dialogTitle="新 增",this.tab=!0):"操 作"===t.label&&(this.dialogTitle="操 作",this.dialogVisible=!0,this.form=s()({},e),this.table_index=n,this.tab=!1)},cancel:function(){this.dialogVisible=!1,this.resetStu()},addSeave:function(n){var e=this,t={id:this.form.id,username:this.form.username,name:this.form.name,departId:this.form.sdName,roleId:this.form.srName,jobId:this.form.sjName,phone:this.form.phone,tel:this.form.tel,qq:this.form.qq,email:this.form.email};n?this.$fetch("/permissions/employees/save",t).then(function(n){200===n.status?(e.rqList(),e.resetStu(),e.$message({message:"添加成功！",type:"success"}),e.editLoading=!1,e.dialogVisible=!1):e.$message({message:n.msg,type:"warning"})}):this.$confirm("确认提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){console.log(t),e.editLoading=!0,e.$fetch("/permissions/employees/update",t).then(function(n){200===n.status?(e.tableData.splice(e.table_index,1,e.form),e.resetStu(),e.editLoading=!1,e.$message({message:"操作成功！",type:"success"})):e.$message({message:n.msg,type:"warning"})}),e.editLoading=!1,e.dialogVisible=!1,e.resetStu()}).catch(function(){})},handleDelete:function(n,e){var t=this;this.$confirm("确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$fetch("/permissions/employees/delete",{id:e.id}),t.tableData.splice(n,1),t.$message({message:"操作成功！",type:"success"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},resetStu:function(){this.form={username:"",name:"",sdName:"",srName:"",sjName:"",sjId:"",srId:"",sdId:"",phone:"",tel:"",qq:"",email:""}},closeDialog:function(n){this.resetStu(),n()}}},o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",{staticClass:"overh"},[t("div",{staticClass:"warp-breadcrum warp-top"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[n._v("首页")]),n._v(" "),n._l(this.$route.matched,function(e){return t("el-breadcrumb-item",{key:e.index},[n._v(n._s(e.name))])})],2)],1),n._v(" "),t("div",{staticClass:"warp-operation warp-top"},[t("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus-outline"},on:{click:function(e){n.handleEdit()}}},[n._v("新 增")])],1),n._v(" "),t("el-col",{staticClass:"warp-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"qhz-table",staticStyle:{width:"100%"},attrs:{data:n.tableData,"tooltip-effect":"dark"}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),n._v(" "),t("el-table-column",{attrs:{prop:"username",label:"员工用户名",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"name",label:"员工名称",width:"100"}}),n._v(" "),t("el-table-column",{attrs:{prop:"sdName",label:"部门名称",width:"100"}}),n._v(" "),t("el-table-column",{attrs:{prop:"srName",label:"角 色",width:"100"}}),n._v(" "),t("el-table-column",{attrs:{prop:"sjName",label:"职位名称",width:"100"}}),n._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号码",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"tel",label:"座机号码",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"qq",label:"Q Q",width:"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"email",label:"邮 箱",width:"220"}}),n._v(" "),t("el-table-column",{attrs:{prop:"tag",label:"操 作","filter-placement":"bottom-end"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){n.handleEdit(e.$index,e.row,e.column)}}},[n._v("修 改")]),n._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){n.handleDelete(e.$index,e.row)}}},[n._v("删 除")])]}}])})],1)],1),n._v(" "),t("el-dialog",{attrs:{title:n.dialogTitle,visible:n.dialogVisible,"before-close":n.closeDialog,size:"tiny"},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("el-form",{ref:"editorForm",attrs:{model:n.form,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"员工用户名"}},[t("el-input",{model:{value:n.form.username,callback:function(e){n.$set(n.form,"username",e)},expression:"form.username"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"员工名称"}},[t("el-input",{model:{value:n.form.name,callback:function(e){n.$set(n.form,"name",e)},expression:"form.name"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"部门名称"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:n.form.sdName,callback:function(e){n.$set(n.form,"sdName",e)},expression:"form.sdName"}},n._l(n.department,function(n){return t("el-option",{key:n.sdId,attrs:{label:n.sdName,value:n.sdId}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"角色"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:n.form.srName,callback:function(e){n.$set(n.form,"srName",e)},expression:"form.srName"}},n._l(n.role,function(n){return t("el-option",{key:n.srId,attrs:{label:n.srName,value:n.srId}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"职位名称"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:n.form.sjName,callback:function(e){n.$set(n.form,"sjName",e)},expression:"form.sjName"}},n._l(n.job,function(n){return t("el-option",{key:n.sjId,attrs:{label:n.sjName,value:n.sjId}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"手机号码"}},[t("el-input",{model:{value:n.form.phone,callback:function(e){n.$set(n.form,"phone",e)},expression:"form.phone"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"座机号码"}},[t("el-input",{model:{value:n.form.tel,callback:function(e){n.$set(n.form,"tel",e)},expression:"form.tel"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"QQ"}},[t("el-input",{model:{value:n.form.qq,callback:function(e){n.$set(n.form,"qq",e)},expression:"form.qq"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:n.form.email,callback:function(e){n.$set(n.form,"email",e)},expression:"form.email"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:n.editLoading},on:{click:function(e){n.addSeave(n.tab)}}},[n._v(n._s(n.dialogTitle))]),n._v(" "),t("el-button",{on:{click:n.cancel}},[n._v("取 消")])],1)],1)],1)],1)},r=[],m={render:o,staticRenderFns:r},c=m,d=t("X4nt"),u=a,f=d(i,c,!1,u,null,null);e.default=f.exports},C1z1:function(n,e,t){var a=t("LFXq");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("5ten")("1d651168",a,!0,{})},LFXq:function(n,e,t){e=n.exports=t("I71c")(!0),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"employees.vue",sourceRoot:""}])}});
//# sourceMappingURL=2.c36db2fc14d637d30251.js.map